<div>
  <h2 class="text-2xl font-semibold mb-4 text-[#e6edf3]">Navigation Log</h2>
  <div class="overflow-x-auto rounded-lg border border-[#30363d]">
    <table class="min-w-full divide-y divide-[#30363d]">
      <thead class="bg-[#161b22]">
        <tr>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">Waypoint</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">VOR Ident</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">VOR Freq</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">Course</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">Wind Dir</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">Wind Vel</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">TAS</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">Altitude</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">TC</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">WCA</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">TH</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">Var</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">MH</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">Dist</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">GS</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">ETE</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">GPH</th>
          <th scope="col" class="py-3.5 px-3 text-left text-xs font-semibold text-[#7d8590] uppercase tracking-wider whitespace-nowrap">Fuel</th>
          <th scope="col" class="relative py-3.5 pl-3 pr-4"><span class="sr-only">Remove</span></th>
        </tr>
      </thead>
      <tbody class="divide-y divide-[#30363d]">
        @for (row of navlogRows(); track trackById(index, row); let index = $index) {
          <tr class="hover:bg-[#30363d]/30">
            <td class="p-2 whitespace-nowrap"><input type="text" [(ngModel)]="row.waypoint" name="waypoint-{{row.id}}" class="w-full min-w-[7rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="text" [(ngModel)]="row.vorIdent" name="vorIdent-{{row.id}}" class="w-full min-w-[6rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="number" step="0.01" [(ngModel)]="row.vorFreq" name="vorFreq-{{row.id}}" class="w-full min-w-[6rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="number" [(ngModel)]="row.course" (ngModelChange)="calculateRow(row.id)" name="course-{{row.id}}" class="w-full min-w-[5rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="number" [(ngModel)]="row.windDir" (ngModelChange)="calculateRow(row.id)" name="windDir-{{row.id}}" class="w-full min-w-[5rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="number" [(ngModel)]="row.windVel" (ngModelChange)="calculateRow(row.id)" name="windVel-{{row.id}}" class="w-full min-w-[5rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="number" [(ngModel)]="row.tas" (ngModelChange)="calculateRow(row.id)" name="tas-{{row.id}}" class="w-full min-w-[5rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="number" [(ngModel)]="row.altitude" name="altitude-{{row.id}}" class="w-full min-w-[6rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input readonly type="number" [ngModel]="row.tc" name="tc-{{row.id}}" class="w-full min-w-[5rem] bg-transparent rounded-md p-2 text-[#e6edf3] focus:outline-none sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input readonly type="number" [ngModel]="row.wca" name="wca-{{row.id}}" class="w-full min-w-[5rem] bg-transparent rounded-md p-2 text-[#e6edf3] focus:outline-none sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input readonly type="number" [ngModel]="row.th" name="th-{{row.id}}" class="w-full min-w-[5rem] bg-transparent rounded-md p-2 text-[#e6edf3] focus:outline-none sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="text" [(ngModel)]="row.variation" (ngModelChange)="calculateRow(row.id)" name="variation-{{row.id}}" placeholder="10 (add) or -10 (subtract)" class="w-full min-w-[5rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input readonly type="number" [ngModel]="row.mh" name="mh-{{row.id}}" class="w-full min-w-[5rem] bg-transparent rounded-md p-2 text-[#e6edf3] focus:outline-none sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input type="number" [(ngModel)]="row.distance" (ngModelChange)="calculateRow(row.id)" name="distance-{{row.id}}" class="w-full min-w-[5rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input readonly type="number" [ngModel]="row.gs" name="gs-{{row.id}}" class="w-full min-w-[5rem] bg-transparent rounded-md p-2 text-[#e6edf3] focus:outline-none sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap">
              <input readonly type="text" [value]="formatEte(row.ete)" name="ete-{{row.id}}" class="w-full min-w-[5rem] bg-transparent rounded-md p-2 text-[#e6edf3] focus:outline-none sm:text-sm">
            </td>
            <td class="p-2 whitespace-nowrap"><input type="number" [(ngModel)]="row.gph" (ngModelChange)="calculateRow(row.id)" name="gph-{{row.id}}" class="w-full min-w-[5rem] bg-[#0d1117] border border-[#30363d] rounded-md p-2 text-[#e6edf3] focus:outline-none focus:ring-2 focus:ring-[#2f81f7] focus:border-[#2f81f7] sm:text-sm"></td>
            <td class="p-2 whitespace-nowrap"><input readonly type="number" [ngModel]="row.fuel" name="fuel-{{row.id}}" class="w-full min-w-[5rem] bg-transparent rounded-md p-2 text-[#e6edf3] focus:outline-none sm:text-sm"></td>
            <td class="p-2 text-center whitespace-nowrap">
              <button (click)="removeRow(row.id)" class="text-[#7d8590] hover:text-[#f85149] transition-colors p-2 rounded-full focus:outline-none focus:ring-2 focus:ring-[#f85149] focus:ring-offset-2 focus:ring-offset-[#161b22]">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9a1 1 0 000 2h6a1 1 0 100-2H7z" clip-rule="evenodd" /></svg>
              </button>
            </td>
          </tr>
        }
      </tbody>
       <tfoot class="bg-[#161b22] border-t-2 border-[#30363d]">
        <tr>
          <td class="px-3 py-3 text-sm font-semibold text-[#e6edf3] whitespace-nowrap">Totals</td>
          <td colspan="12"></td>
          <td class="px-3 py-3 text-sm font-semibold text-[#e6edf3]">{{ totalDistance() }}</td>
          <td></td>
          <td class="px-3 py-3 text-sm font-semibold text-[#e6edf3]">{{ formatEte(totalEte()) }}</td>
          <td></td>
          <td class="px-3 py-3 text-sm font-semibold text-[#e6edf3]">{{ totalFuel().toFixed(1) }}</td>
          <td></td>
        </tr>
      </tfoot>
    </table>
  </div>

  <div class="mt-6">
    <button (click)="addRow()" class="inline-flex items-center justify-center rounded-md border border-transparent bg-[#238636] px-4 py-2 text-sm font-medium text-white shadow-sm hover:bg-[#2ea043] focus:outline-none focus:ring-2 focus:ring-[#2ea043] focus:ring-offset-2 focus:ring-offset-[#161b22]">
      Add Leg
    </button>
  </div>
</div>