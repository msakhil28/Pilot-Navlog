<div class="space-y-8 font-sans">

  <div class="grid grid-cols-2 sm:grid-cols-3 gap-3">
    @for (calc of calculators; track calc.id) {
    <button (click)="setActiveCalculator(calc.id)" [class]="activeCalculator() === calc.id 
          ? 'bg-flight-blue text-white shadow-lg shadow-flight-blue/30 ring-2 ring-white/20' 
          : 'bg-sky-dark/50 text-sky-muted hover:bg-sky-light hover:text-white hover:scale-105'"
      class="group relative flex flex-col items-center justify-center p-4 rounded-xl border border-white/5 transition-all duration-300 ease-out h-24 backdrop-blur-sm overflow-hidden">

      <!-- Selection Glow -->
      @if (activeCalculator() === calc.id) {
      <div class="absolute inset-0 bg-gradient-to-tr from-white/20 to-transparent opacity-50 pointer-events-none"></div>
      }

      <!-- Icon (You could add improved icons here) -->
      <div class="mb-2 p-2 rounded-full bg-white/5 group-hover:bg-white/10 transition-colors">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
        </svg>
      </div>

      <span class="font-medium text-xs text-center relative z-10">{{ calc.name }}</span>
    </button>
    }
  </div>

  <div
    class="bg-sky-dark/40 backdrop-blur-xl border border-white/10 rounded-3xl p-6 sm:p-8 shadow-2xl relative min-h-[400px] overflow-hidden">
    <!-- Inner Ambient Glow -->
    <div class="absolute -top-20 -left-20 w-80 h-80 bg-flight-blue/5 rounded-full blur-[80px] pointer-events-none">
    </div>

    <div class="relative z-10">
      @switch (activeCalculator()) {
      @case ('pa-da') {
      <div class="animate-in fade-in slide-in-from-bottom-2 duration-300">
        <app-pa-da-calculator></app-pa-da-calculator>
      </div>
      }
      @case ('tsd') {
      <div class="animate-in fade-in slide-in-from-bottom-2 duration-300">
        <app-tsd-calculator></app-tsd-calculator>
      </div>
      }
      @case ('fuel') {
      <div class="animate-in fade-in slide-in-from-bottom-2 duration-300">
        <app-fuel-planner></app-fuel-planner>
      </div>
      }
      @case ('tas') {
      <div class="animate-in fade-in slide-in-from-bottom-2 duration-300">
        <app-tas-calculator></app-tas-calculator>
      </div>
      }
      @case ('wind') {
      <div class="animate-in fade-in slide-in-from-bottom-2 duration-300">
        <app-wind-component-calculator></app-wind-component-calculator>
      </div>
      }
      @case ('conversions') {
      <div class="animate-in fade-in slide-in-from-bottom-2 duration-300">
        <app-conversions-calculator></app-conversions-calculator>
      </div>
      }
      }
    </div>
  </div>
</div>